<html>

<head>
<TAG_VARSTART_CHARSET>
<meta http-equiv="Content-Type" content="text/html; charset={TAG_charset}">
<TAG_VAREND_CHARSET>
<title>User Management</title>
<link rel="StyleSheet" type="text/css" href="/css/storlib.css">
</head>
<script language="JavaScript" type="text/javascript" src="/javascript/storlib.js"></script>
<script language="JavaScript" type="text/javascript">
<!-- Start Script

var a_ip_mac=new Array(
//@a_ip_mac_address#
);

<TAG_LOOPSTART_JSARRAY>
{TAG_jsarray}
<TAG_LOOPEND_JSARRAY>

function split_the_string(ipstring,mac)
{
	var new_ip ;
	var new_mac;
	var i,j;
	
	new_ip = ipstring.split(".");
	new_mac = mac.split(":");
	
	for(i=1;i<5;i++)
	{
		var str;
		var new_str;
		str = "document.form.ipaddr"+i;
		new_str = eval(str);
		new_str.value=new_ip[i-1];
		new_str.disabled = true;
	}
	for(j=1;j<7;j++)
	{
		var str;
		var new_str;
		str = "document.form.mac"+j;
		new_str = eval(str);
		new_str.value=new_mac[j-1];
	}
	

}
function showIP()
{
	var index = document.form.ip_select.selectedIndex;
	var len = 0;

	if ((index >= 0) && (index < document.form.ip_select.options.length - 1))
	{
		split_the_string(document.form.ip_select.options[index].text,a_ip_mac[index]);
	}
	else if (index == document.form.ip_select.options.length - 1)
	{
		clearForm();
	}
	else
	{
		document.form.ipaddr1.value = "";
		document.form.ipaddr2.value = "";
		document.form.ipaddr3.value = "";
		document.form.ipaddr4.value = "";
		document.form.mac1.value = "";
		document.form.mac2.value = "";
		document.form.mac3.value = "";
		document.form.mac4.value = "";
		document.form.mac5.value = "";
		document.form.mac6.value = "";
	}
	document.form.ip_select.focus();
}

function show_system_error_message()
{
<TAG_VARSTART_ERR_MSG>
	var message = "{TAG_err_msg}";
<TAG_VAREND_ERR_MSG>

	if (message != "")
	{
		alert(message);
	}
}

//End Script -->
</script>


<body onLoad="get_cookie();show_system_error_message();">
<form name="form" method="post" action="/cgi/dhcpserver/dhcpstaticHandler.cgi">
<!--layerpopup Div-->
<TAG_VARSTART_WAIT>
<Div id="layerPop" style="position:absolute; left:50px; top:300px; width:300px; height:40px; z-index:0;display:none;">
<tr>
<lign="center" valign="middle">
<table bgcolor="#FFFFFF" bordercolor="00A5FF" cellpadding="10" cellspacing="1" border="1" width="400" height="30">
<tr>
<td align="center">
<font size="4" color="#0064CD">{TAG_ft_wait}</font><br><br>
<marquee direction="right" width="400" height="1" scrollamount="30">
<img src="/image/01_bar_on.png" width="100" height="5">
</marquee>
</table>
</td></tr>
</table>
</td></tr>
</table>
</center>
</Div>
<TAG_VAREND_WAIT>
<!-- //layerpopup div end-->

<input type="hidden" name="ipaddr">
<input type="hidden" name="mac">

<table border="0" width="600" cellspacing="0" cellpadding="2">
<tr>
<TAG_VARSTART_DHCPSTATIC>
	<td class="TITLE" colspan="2">{TAG_ft_dhcpstatic}</td>
<TAG_VAREND_DHCPSTATIC>
</tr>
<tr>
<TAG_VARSTART_EXISTINGIP>
	<td width="166" class="HEAD">{TAG_ft_existingip}</td>
<TAG_VAREND_EXISTINGIP>
	<td width="428" class="CONTENT">
		<select size="6" name="ip_select" onChange="showIP()">
<TAG_LOOPSTART_IP_SELECT>
		{TAG_existIP}
<TAG_LOOPEND_IP_SELECT>
		<option>===== END LIST =====</option>
		</select></font></td>
</tr>
<tr>
	<td>&nbsp;</td>
	<td>&nbsp;</td>
</tr>
<TAG_VARSTART_IDINFO>
<tr>
	<td class="HEAD">{TAG_ft_ipaddr}</td>
	<td class="CONTENT"><input type="text" name="ipaddr1" size="4" maxlength="3" onkeyup="movenext(this,3);">.
	    <input type="text" name="ipaddr2" size="4" maxlength="3" onkeyup="movenext(this,4);">.
	    <input type="text" name="ipaddr3" size="4" maxlength="3" onkeyup="movenext(this,5);">.
	    <input type="text" name="ipaddr4" size="4" maxlength="3" onkeyup="checkdot(this,6);"></td>
</tr>
<tr>
	<td class="HEAD">{TAG_ft_mac}</font></td>
	<td class="CONTENT"><input type="text" name="mac1" size="3" maxlength="2" onkeyup="movenextmac(this,7);">:
	    <input type="text" name="mac2" size="3" maxlength="2" onkeyup="movenextmac(this,8);">:
	    <input type="text" name="mac3" size="3" maxlength="2" onkeyup="movenextmac(this,9);">:
	    <input type="text" name="mac4" size="3" maxlength="2" onkeyup="movenextmac(this,10);">:
	    <input type="text" name="mac5" size="3" maxlength="2" onkeyup="movenextmac(this,11);">:
	    <input type="text" name="mac6" size="3" maxlength="2" ></td>
</tr>
<TAG_VAREND_IDINFO>
<tr>
	<td colspan="2">
<TAG_VARSTART_BUTTON>
	<p align="center"><input class="button" type="button" name="save" value="{TAG_bt_save}" onClick="checkValue()">&nbsp;
  		<input class="button" type="button" name="clear" value="{TAG_bt_clearForm}" onClick="clearForm()">&nbsp;
		<input class="button" type="button" name="delete" value="{TAG_bt_delip}" onClick="delete_ip()">
<TAG_VAREND_BUTTON>
	</td>
</tr>
</table>
</form>
</body>


<script language="JavaScript" type="text/javascript">
<!-- Start Script
<TAG_VARSTART_ERROR>

function checkIPString(Ipstring)
{
		var msg="";
		var i;
		var ip = Ipstring.split(".");

		for (i =0;i<4;i++)
		{
			if(isNaN(ip[i]))
			{
				msg = "IP"+(i+1)+" {TAG_ft_errnumeral} !!";
				return msg; 
			}
			if (ip[i]>255 || ip[i]<0 )
			{
				msg = "IP"+(i+1)+" {TAG_ft_errrange} !!";
				return msg;
			}
		}
		return msg;
}


function isHexcheck(string ,index)
{
		var msg="";
		var i = string.length;
		var j;
		for ( j=0 ; j<i ; j++)
		{	
		 	if (!isHex(string.charAt(j)))
			{
			
				 msg ="Mac["+(index+1)+"] {TAG_ft_nothex} !!";
				 return msg;
			}
		}
		return msg;
}

function checkmac(macstring)
{
	var mac ;
	var msg="";
	
	mac = macstring.split(":");
	if (mac.length !=6)
	{
			msg ="{TAG_ft_macformat}!";
			return msg;
	}
	for (i =0 ;i <6;i++)
	{
			msg = isHexcheck(mac[i] , i);
			if(msg.length > 0)
				return msg;
	}

	return msg;

}
<TAG_VAREND_ERROR>

<TAG_VARSTART_JS>
var msg_no_ip = "{TAG_em_msg_no_ip}";

function ViewlayerPop(){
    document.getElementById("layerPop").style.display='inline'
}

function checkValue()
{
	var msg="";
	var i;
	for(i=1;i<5;i++)
	{
		var str = "document.form.ipaddr"+i;
		var new_str = eval(str);
		new_str.disabled = false;
	}

	if(isBlank(document.form.ipaddr1.value) ||isBlank(document.form.ipaddr2.value)||isBlank(document.form.ipaddr3.value)||isBlank(document.form.ipaddr4.value))
	{
		alert("{TAG_ft_ipnull}!!");
		return false;
	}

	if(isBlank(document.form.mac1.value)||isBlank(document.form.mac2.value)||isBlank(document.form.mac3.value)||
		isBlank(document.form.mac4.value)||isBlank(document.form.mac5.value)||isBlank(document.form.mac6.value))
	{
		alert("{TAG_ft_macnull}!!");
		return false;
	}
	
	var ipstring=document.form.ipaddr1.value+"."+document.form.ipaddr2.value+"."+document.form.ipaddr3.value+"."+document.form.ipaddr4.value ;
	msg = checkIPString(ipstring);
	if(msg.length > 0)
	{
		alert(msg);
		return false;
	}
	
	var macstring =document.form.mac1.value+":"+document.form.mac2.value+":"+document.form.mac3.value+":"+document.form.mac4.value+":"+document.form.mac5.value+":"+document.form.mac6.value ;
	msg = checkmac(macstring);
	if(msg.length > 0)
	{
		alert(msg);
		return false;
	}
	
	document.form.ipaddr.value= ipstring;
	document.form.mac.value= macstring;
	if (confirm("{TAG_cf_message}"))
	{
		ViewlayerPop();
		document.form.submit();
		return true;
	}
}

function clearForm()
{
	var i,j;
	
	document.form.ip_select.selectedIndex = document.form.ip_select.options.length - 1;
	for (i=1;i<5;i++)
	{
		var str = "document.form.ipaddr"+i;
		var new_str = eval(str);
		new_str.value="";
		new_str.disabled = false;
	}
	for (j=1;j<7;j++)
	{
		var str = "document.form.mac"+j;
		var new_str = eval(str);
		new_str.value="";
	}
	return true;
}

function delete_ip()
{
	document.form.ipaddr.disabled = false;

	var index = document.form.ip_select.selectedIndex;
	var ipaddr=document.form.ipaddr1.value+"."+document.form.ipaddr2.value+"."+document.form.ipaddr3.value+"."+document.form.ipaddr4.value ;

	if(index < 0||index >= (document.form.ip_select.options.length - 1))
	{
		alert(msg_no_ip);
		return;
	}

	if (confirm("{TAG_jc_delConfirm}") == true)
	{
		var para = "name=" + ipaddr;
		var target = "/cgi/dhcpserver/staticipDeleteHandler.cgi?" + para;

		gotoUrl(target);
	}
}
<TAG_VAREND_JS>

//End Script -->
</script>
</html>
